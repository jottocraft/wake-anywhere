(this["webpackJsonpwake-anywhere-dashboard"]=this["webpackJsonpwake-anywhere-dashboard"]||[]).push([[0],{34:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(24),a=n.n(s),o=(n(34),n(5)),r=n(25),l=n.n(r),d=n(14),j=n.n(d),h=n(2),u=n(4),b=n.n(u),m=n(7),O=n(16),x=n.n(O),f=n(12),v=n.n(f),g=n(19),k=n.n(g),p=n(0);function w(e){var t,n=e.networks,i=e.editingDevice,s=e.setEditingDevice,a=e.setDevices,r=Object(c.useState)(i),l=Object(o.a)(r,2),d=l[0],j=l[1],h=Object(c.useState)(!1),u=Object(o.a)(h,2),O=u[0],f=u[1],g=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(f("deleting"),fetch("/api/devices",{method:"DELETE",body:JSON.stringify({id:d.id}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s(!1),a(e)}))):(f("saving"),fetch("/api/devices",{method:"PATCH",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s(!1),a(e)})))}),[f,d,a,s]);return Object(p.jsx)(x.a,{title:i.id?"Edit Device":"Add Device",icon:"computer",onClose:function(){return s(null)},children:Object(p.jsxs)("div",{className:"space-y-5",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:"Device name"}),Object(p.jsx)(v.a,{width:400,type:"text",icon:"drive_file_rename_outline",value:d.name,onChange:function(e){return j(Object(m.a)(Object(m.a)({},d),{},{name:e.target.value}))}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:"Network"}),Object(p.jsx)(k.a,{items:Object.keys(n).map((function(e){return{name:n[e].name,icon:"public",onClick:function(){return j(Object(m.a)(Object(m.a)({},d),{},{network:n[e].id}))}}})),children:Object(p.jsx)(b.a,{right:!0,type:"outline",icon:"arrow_drop_down",children:d.network?(null===(t=n[d.network])||void 0===t?void 0:t.name)||"(deleted)":"Select a network"})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:"MAC Address"}),Object(p.jsx)(v.a,{width:400,type:"text",icon:"router",value:d.mac,onChange:function(e){return j(Object(m.a)(Object(m.a)({},d),{},{mac:e.target.value}))}})]}),Object(p.jsxs)("div",{className:"mt-20 flex flex-row justify-between items-center",children:[Object(p.jsxs)("div",{className:"space-x-2",children:[Object(p.jsx)(b.a,{type:"primary",icon:"save",onClick:function(){return g()},children:"saving"==O?"Saving...":"Save"}),Object(p.jsx)(b.a,{icon:"close",onClick:function(){return s(null)},children:"Cancel"})]}),i.id&&Object(p.jsx)(b.a,{type:"outline",icon:"delete",onClick:function(){return g(!0)},children:"deleting"==O?"Deleting...":"Delete"})]})]})})}function N(e){var t=e.networks,n=e.devices,i=e.setDevices,s=Object(c.useState)(null),a=Object(o.a)(s,2),r=a[0],l=a[1],d=Object(c.useState)(null),h=Object(o.a)(d,2),u=h[0],m=h[1],O=Object(c.useCallback)((function(e){m(e),fetch("/api/devices/wake",{method:"PATCH",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){m(null),i(e)}))}),[m,i]);return Object(p.jsxs)(j.a,{children:[r&&Object(p.jsx)(w,{networks:t,editingDevice:r,setEditingDevice:l,setDevices:i}),Object(p.jsxs)("div",{className:"mt-12 space-y-12",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-4xl font-bold",children:"Devices"}),null!==t&&0!==Object.keys(t).length&&Object(p.jsx)("div",{className:"mt-4",children:Object(p.jsx)(b.a,{onClick:function(){return l({})},icon:"add",children:"Add"})})]}),Object(p.jsx)("div",{className:"mt-10",children:null==n||null==t?Object(p.jsx)("h5",{className:"text-lg font-medium",children:"Loading configured devices and networks..."}):0==Object.keys(n).length&&0==Object.keys(t).length?Object(p.jsx)("h5",{className:"text-lg font-medium",children:"You haven't configured any networks yet. Add a network in the Settings tab first, then return here to begin adding devices."}):0==Object.keys(n).length&&0!==Object.keys(t).length?Object(p.jsx)("h5",{className:"text-lg font-medium",children:"You haven't configured any devices yet"}):Object(p.jsxs)("table",{className:"w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"text-lg font-semibold text-left",children:"Name"}),Object(p.jsx)("th",{className:"text-lg font-semibold text-left",children:"Last woken"}),Object(p.jsx)("th",{})]})}),Object(p.jsx)("tbody",{children:Object.keys(n).map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-lg font-medium",children:n[e].name}),Object(p.jsx)("td",{className:"text-lg",children:n[e].lastWoken?new Date(n[e].lastWoken).toLocaleString():"Never"}),Object(p.jsxs)("td",{className:"py-2 space-x-2 text-right",children:[Object(p.jsx)(b.a,{type:"primary",onClick:function(){return O(e)},icon:"power_settings_new",children:u==e?"Waking up...":"Wake up"}),Object(p.jsx)(b.a,{onClick:function(){return l(n[e])},icon:"edit",children:"Edit"})]})]})}))})]})})]})]})}var y=n(26),C=n.n(y),S=n(20),D=n.n(S);function E(e){var t=e.editingNetwork,n=e.setEditingNetwork,i=e.setNetworks,s=Object(c.useState)(t),a=Object(o.a)(s,2),r=a[0],l=a[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),h=j[0],u=j[1],O=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(u("deleting"),fetch("/api/networks",{method:"DELETE",body:JSON.stringify({id:r.id}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(!1),i(e)}))):(u("saving"),fetch("/api/networks",{method:"PATCH",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(!1),i(e)})))}),[u,r,i,n]);return Object(p.jsx)(x.a,{title:t.id?"Edit Network":"Add Network",icon:"public",onClose:function(){return n(null)},children:Object(p.jsxs)("div",{className:"space-y-5",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:"Network name"}),Object(p.jsx)(v.a,{width:400,type:"text",icon:"drive_file_rename_outline",value:r.name,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{name:e.target.value}))}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:"DNS route"}),Object(p.jsx)(v.a,{width:400,type:"text",icon:"dns",value:r.dns,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{dns:e.target.value}))}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"mb-1 font-medium",children:t.id?"Secret (leave blank to keep existing)":"Controller secret"}),Object(p.jsx)(v.a,{width:400,type:"password",icon:"key",value:r.secret,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{secret:e.target.value}))}})]}),Object(p.jsxs)("div",{className:"mt-20 flex flex-row justify-between items-center",children:[Object(p.jsxs)("div",{className:"space-x-2",children:[Object(p.jsx)(b.a,{type:"primary",icon:"save",onClick:function(){return O()},children:"saving"==h?"Saving...":"Save"}),Object(p.jsx)(b.a,{icon:"close",onClick:function(){return n(null)},children:"Cancel"})]}),t.id&&Object(p.jsx)(b.a,{icon:"delete",onClick:function(){return O(!0)},children:"deleting"==h?"Deleting...":"Delete"})]})]})})}function T(e){var t=e.networks,n=e.setNetworks,i=Object(c.useContext)(D.a),s=Object(c.useState)(null),a=Object(o.a)(s,2),r=a[0],l=a[1];return Object(p.jsxs)(j.a,{children:[r&&Object(p.jsx)(E,{editingNetwork:r,setEditingNetwork:l,setNetworks:n}),Object(p.jsxs)("div",{className:"mt-12 space-y-12",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h1",{className:"text-4xl font-bold",children:"Settings"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-3xl font-semibold",children:"Theme"}),Object(p.jsx)("div",{className:"mt-4",children:Object(p.jsx)(C.a,{items:[{name:"System",icon:"computer",active:"system"==i.id,onClick:function(){return i.update("system")}},{name:"Light",icon:"light_mode",active:"light"==i.id,onClick:function(){return i.update("light")}},{name:"Dark",icon:"dark_mode",active:"dark"==i.id,onClick:function(){return i.update("dark")}}]})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-3xl font-semibold",children:"Networks"}),Object(p.jsx)("div",{className:"mt-4",children:Object(p.jsx)(b.a,{onClick:function(){return l({})},icon:"add",children:"Add"})}),Object(p.jsx)("div",{className:"mt-10",children:null==t?Object(p.jsx)("h5",{className:"text-lg font-medium",children:"Loading configured networks..."}):0==Object.keys(t).length?Object(p.jsx)("h5",{className:"text-lg font-medium",children:"You haven't added any networks yet"}):Object(p.jsxs)("table",{className:"w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"text-lg font-semibold text-left",children:"Name"}),Object(p.jsx)("th",{className:"text-lg font-semibold text-left",children:"DNS route"}),Object(p.jsx)("th",{})]})}),Object(p.jsx)("tbody",{children:Object.keys(t).map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"text-lg font-medium",children:t[e].name}),Object(p.jsx)("td",{className:"text-lg",children:t[e].dns}),Object(p.jsx)("td",{className:"py-2 text-right",children:Object(p.jsx)(b.a,{onClick:function(){return l(t[e])},icon:"edit",children:"Edit"})})]})}))})]})})]})]})]})}n(38);var _=function(){var e=Object(h.f)(),t=Object(h.g)(),n=Object(c.useState)(null),i=Object(o.a)(n,2),s=i[0],a=i[1];Object(c.useEffect)((function(){fetch("/api/devices").then((function(e){return e.json()})).then((function(e){a(e)}))}),[]);var r=Object(c.useState)(null),d=Object(o.a)(r,2),u=d[0],b=d[1];return Object(c.useEffect)((function(){fetch("/api/networks").then((function(e){return e.json()})).then((function(e){b(e)}))}),[]),Object(p.jsx)(l.a,{navbar:{title:"Wake Anywhere",logo:"/icon.svg",canRecess:!0,items:[{name:"Devices",icon:"computer",active:"/"==t.pathname,onClick:function(){return e.push("/")}},{name:"Settings",icon:"settings",active:"/settings"==t.pathname,onClick:function(){return e.push("/settings")}}],accountName:"demo.wakeanywhere.com"==window.location.host&&"Demo (read-only)",accountDropdown:"demo.wakeanywhere.com"==window.location.host&&[{name:"Source Code",icon:"code",onClick:function(){return window.open("https://github.com/jottocraft/wake-anywhere")}},{name:"Documentation",icon:"article",onClick:function(){return window.open("https://github.com/jottocraft/wake-anywhere#readme")}},{name:"hello@jottocraft.com",icon:"email",onClick:function(){return window.open("mailto:hello@jottocraft.com")}}]},children:Object(p.jsxs)(h.c,{children:[Object(p.jsx)(h.a,{path:"/settings",children:Object(p.jsx)(T,{networks:u,setNetworks:b})}),Object(p.jsx)(h.a,{exact:!0,path:"/",children:Object(p.jsx)(N,{networks:u,devices:s,setDevices:a})}),Object(p.jsx)(h.a,{path:"*",children:Object(p.jsx)(j.a,{children:Object(p.jsxs)("div",{className:"mt-12",children:[Object(p.jsx)("h1",{className:"text-4xl font-bold",children:"404"}),Object(p.jsx)("h5",{className:"text-2xl font-medium",children:"The requested URL was not found"})]})})})]})})},A=n(21),L=n(29),J=n.n(L);a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(A.a,{children:Object(p.jsx)(J.a,{children:Object(p.jsx)(_,{})})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.224a53a1.chunk.js.map