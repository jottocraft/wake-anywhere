(this["webpackJsonpwake-anywhere-dashboard"]=this["webpackJsonpwake-anywhere-dashboard"]||[]).push([[0],{35:function(e,t,n){},39:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(25),a=n.n(s),o=(n(35),n(5)),r=n(26),l=n.n(r),d=n(14),j=n.n(d),h=n(2),b=n(4),u=n.n(b),m=n(7),O=n(16),x=n.n(O),f=n(12),v=n.n(f),g=n(19),p=n.n(g),k=n(0);function w(e){var t,n=e.networks,i=e.editingDevice,s=e.setEditingDevice,a=e.setDevices,r=Object(c.useState)(i),l=Object(o.a)(r,2),d=l[0],j=l[1],h=Object(c.useState)(!1),b=Object(o.a)(h,2),O=b[0],f=b[1],g=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(f("deleting"),fetch("/api/devices",{method:"DELETE",body:JSON.stringify({id:d.id}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s(!1),a(e)}))):(f("saving"),fetch("/api/devices",{method:"PATCH",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s(!1),a(e)})))}),[f,d,a,s]);return Object(k.jsx)(x.a,{title:i.id?"Edit Device":"Add Device",icon:"computer",onClose:function(){return s(null)},children:Object(k.jsxs)("div",{className:"space-y-5",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:"Device name"}),Object(k.jsx)(v.a,{width:400,type:"text",icon:"drive_file_rename_outline",value:d.name,onChange:function(e){return j(Object(m.a)(Object(m.a)({},d),{},{name:e.target.value}))}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:"Network"}),Object(k.jsx)(p.a,{items:Object.keys(n).map((function(e){return{name:n[e].name,icon:"public",onClick:function(){return j(Object(m.a)(Object(m.a)({},d),{},{network:n[e].id}))}}})),children:Object(k.jsx)(u.a,{right:!0,type:"outline",icon:"arrow_drop_down",children:d.network?(null===(t=n[d.network])||void 0===t?void 0:t.name)||"(deleted)":"Select a network"})})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:"MAC Address"}),Object(k.jsx)(v.a,{width:400,type:"text",icon:"router",value:d.mac,onChange:function(e){return j(Object(m.a)(Object(m.a)({},d),{},{mac:e.target.value}))}})]}),Object(k.jsxs)("div",{className:"mt-20 flex flex-row justify-between items-center",children:[Object(k.jsxs)("div",{className:"space-x-2",children:[Object(k.jsx)(u.a,{type:"primary",icon:"save",onClick:function(){return g()},children:"saving"==O?"Saving...":"Save"}),Object(k.jsx)(u.a,{icon:"close",onClick:function(){return s(null)},children:"Cancel"})]}),i.id&&Object(k.jsx)(u.a,{type:"outline",icon:"delete",onClick:function(){return g(!0)},children:"deleting"==O?"Deleting...":"Delete"})]})]})})}function N(e){var t=e.networks,n=e.devices,i=e.setDevices,s=Object(c.useState)(null),a=Object(o.a)(s,2),r=a[0],l=a[1],d=Object(c.useState)(null),h=Object(o.a)(d,2),b=h[0],m=h[1],O=Object(c.useCallback)((function(e){m(e),fetch("/api/devices/wake",{method:"PATCH",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){m(null),i(e)}))}),[m,i]);return Object(k.jsxs)(j.a,{children:[r&&Object(k.jsx)(w,{networks:t,editingDevice:r,setEditingDevice:l,setDevices:i}),Object(k.jsxs)("div",{className:"mt-12 space-y-12",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"text-4xl font-bold",children:"Devices"}),null!==t&&0!==Object.keys(t).length&&Object(k.jsx)("div",{className:"mt-4",children:Object(k.jsx)(u.a,{onClick:function(){return l({})},icon:"add",children:"Add"})})]}),Object(k.jsx)("div",{className:"mt-10",children:null==n||null==t?Object(k.jsx)("h5",{className:"text-lg font-medium",children:"Loading configured devices and networks..."}):0==Object.keys(n).length&&0==Object.keys(t).length?Object(k.jsx)("h5",{className:"text-lg font-medium",children:"You haven't configured any networks yet. Add a network in the Settings tab first, then return here to begin adding devices."}):0==Object.keys(n).length&&0!==Object.keys(t).length?Object(k.jsx)("h5",{className:"text-lg font-medium",children:"You haven't configured any devices yet"}):Object(k.jsxs)("table",{className:"w-full",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{className:"text-lg font-semibold text-left",children:"Name"}),Object(k.jsx)("th",{className:"text-lg font-semibold text-left",children:"Last woken"}),Object(k.jsx)("th",{})]})}),Object(k.jsx)("tbody",{children:Object.keys(n).map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{className:"text-lg font-medium",children:n[e].name}),Object(k.jsx)("td",{className:"text-lg",children:n[e].lastWoken?new Date(n[e].lastWoken).toLocaleString():"Never"}),Object(k.jsxs)("td",{className:"py-2 space-x-2 text-right",children:[Object(k.jsx)(u.a,{type:"primary",onClick:function(){return O(e)},icon:"power_settings_new",children:b==e?"Waking up...":"Wake up"}),Object(k.jsx)(u.a,{onClick:function(){return l(n[e])},icon:"edit",children:"Edit"})]})]})}))})]})})]})]})}var y=n(27),C=n.n(y),S=n(22),D=n.n(S),E=n(20),T=n.n(E);function _(e){var t=e.editingNetwork,n=e.setEditingNetwork,i=e.setNetworks,s=Object(c.useState)(t),a=Object(o.a)(s,2),r=a[0],l=a[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),h=j[0],b=j[1],O=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(b("deleting"),fetch("/api/networks",{method:"DELETE",body:JSON.stringify({id:r.id}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(!1),i(e)}))):(b("saving"),fetch("/api/networks",{method:"PATCH",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(!1),i(e)})))}),[b,r,i,n]);return Object(k.jsx)(x.a,{title:t.id?"Edit Network":"Add Network",icon:"public",onClose:function(){return n(null)},children:Object(k.jsxs)("div",{className:"space-y-5",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:"Network name"}),Object(k.jsx)(v.a,{width:400,type:"text",icon:"drive_file_rename_outline",value:r.name,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{name:e.target.value}))}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:"DNS route"}),Object(k.jsx)(v.a,{width:400,type:"text",icon:"dns",value:r.dns,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{dns:e.target.value}))}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"mb-1 font-medium",children:t.id?"Secret (leave blank to keep existing)":"Controller secret"}),Object(k.jsx)(v.a,{width:400,type:"password",icon:"key",value:r.secret,onChange:function(e){return l(Object(m.a)(Object(m.a)({},r),{},{secret:e.target.value}))}})]}),Object(k.jsxs)("div",{className:"mt-20 flex flex-row justify-between items-center",children:[Object(k.jsxs)("div",{className:"space-x-2",children:[Object(k.jsx)(u.a,{type:"primary",icon:"save",onClick:function(){return O()},children:"saving"==h?"Saving...":"Save"}),Object(k.jsx)(u.a,{icon:"close",onClick:function(){return n(null)},children:"Cancel"})]}),t.id&&Object(k.jsx)(u.a,{icon:"delete",onClick:function(){return O(!0)},children:"deleting"==h?"Deleting...":"Delete"})]})]})})}function A(e){var t=e.networks,n=e.setNetworks,i=Object(c.useContext)(T.a),s=Object(c.useState)(null),a=Object(o.a)(s,2),r=a[0],l=a[1];return Object(k.jsxs)(j.a,{children:[r&&Object(k.jsx)(_,{editingNetwork:r,setEditingNetwork:l,setNetworks:n}),Object(k.jsxs)("div",{className:"mt-12 space-y-12",children:[Object(k.jsx)("div",{children:Object(k.jsx)("h1",{className:"text-4xl font-bold",children:"Settings"})}),Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{className:"text-3xl font-semibold",children:"Theme"}),Object(k.jsx)("div",{className:"mt-4",children:Object(k.jsx)(C.a,{items:[{name:"System",icon:"computer",active:"system"==i.id,onClick:function(){return i.update("system")}},{name:"Light",icon:"light_mode",active:"light"==i.id,onClick:function(){return i.update("light")}},{name:"Dark",icon:"dark_mode",active:"dark"==i.id,onClick:function(){return i.update("dark")}}]})})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{className:"text-3xl font-semibold",children:"Networks"}),Object(k.jsx)("div",{className:"mt-4",children:Object(k.jsx)(u.a,{onClick:function(){return l({})},icon:"add",children:"Add"})}),Object(k.jsx)("div",{className:"mt-10",children:null==t?Object(k.jsx)("h5",{className:"text-lg font-medium",children:"Loading configured networks..."}):0==Object.keys(t).length?Object(k.jsx)("h5",{className:"text-lg font-medium",children:"You haven't added any networks yet"}):Object(k.jsxs)("table",{className:"w-full",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{className:"text-lg font-semibold text-left",children:"Name"}),Object(k.jsx)("th",{className:"text-lg font-semibold text-left",children:"DNS route"}),Object(k.jsx)("th",{})]})}),Object(k.jsx)("tbody",{children:Object.keys(t).map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{className:"text-lg font-medium",children:t[e].name}),Object(k.jsx)("td",{className:"text-lg",children:t[e].dns}),Object(k.jsx)("td",{className:"py-2 text-right",children:Object(k.jsx)(u.a,{onClick:function(){return l(t[e])},icon:"edit",children:"Edit"})})]})}))})]})})]}),Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"mt-80 py-14",children:Object(k.jsxs)("div",{className:"text-center text-type-20",children:[Object(k.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[Object(k.jsx)("img",{alt:"jottocraft logo",className:"h-10 mr-4",src:"https://cdn.jottocraft.com/images/footerImage.png"}),Object(k.jsx)("h5",{className:"text-2xl font-medium",children:"jottocraft"})]}),Object(k.jsxs)("p",{className:"mt-2",children:["(c) jottocraft 2021. ",Object(k.jsx)(D.a,{href:"https://github.com/jottocraft/wake-anywhere",children:"source code"})," / ",Object(k.jsx)(D.a,{href:"https://github.com/jottocraft/wake-anywhere/blob/main/LICENSE",children:"license"})]})]})})})]})]})}n(39);var L=function(){var e=Object(h.f)(),t=Object(h.g)(),n=Object(c.useState)(null),i=Object(o.a)(n,2),s=i[0],a=i[1];Object(c.useEffect)((function(){fetch("/api/devices").then((function(e){return e.json()})).then((function(e){a(e)}))}),[]);var r=Object(c.useState)(null),d=Object(o.a)(r,2),b=d[0],u=d[1];return Object(c.useEffect)((function(){fetch("/api/networks").then((function(e){return e.json()})).then((function(e){u(e)}))}),[]),Object(k.jsx)(l.a,{navbar:{title:"Wake Anywhere",logo:"/icon.svg",canRecess:!0,items:[{name:"Devices",icon:"computer",active:"/"==t.pathname,onClick:function(){return e.push("/")}},{name:"Settings",icon:"settings",active:"/settings"==t.pathname,onClick:function(){return e.push("/settings")}}],accountName:"demo.wakeanywhere.com"==window.location.host&&"Demo (read-only)",accountDropdown:"demo.wakeanywhere.com"==window.location.host&&[{name:"Source Code",icon:"code",onClick:function(){return window.open("https://github.com/jottocraft/wake-anywhere")}},{name:"Documentation",icon:"article",onClick:function(){return window.open("https://github.com/jottocraft/wake-anywhere#readme")}},{name:"hello@jottocraft.com",icon:"email",onClick:function(){return window.open("mailto:hello@jottocraft.com")}}]},children:Object(k.jsxs)(h.c,{children:[Object(k.jsx)(h.a,{path:"/settings",children:Object(k.jsx)(A,{networks:b,setNetworks:u})}),Object(k.jsx)(h.a,{exact:!0,path:"/",children:Object(k.jsx)(N,{networks:b,devices:s,setDevices:a})}),Object(k.jsx)(h.a,{path:"*",children:Object(k.jsx)(j.a,{children:Object(k.jsxs)("div",{className:"mt-12",children:[Object(k.jsx)("h1",{className:"text-4xl font-bold",children:"404"}),Object(k.jsx)("h5",{className:"text-2xl font-medium",children:"The requested URL was not found"})]})})})]})})},J=n(21),W=n(30),H=n.n(W);a.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(H.a,{children:Object(k.jsx)(L,{})})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.34c25b18.chunk.js.map